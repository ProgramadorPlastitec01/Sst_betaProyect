{% extends 'base.html' %}

{% block title %}Inspección de Botiquín{% endblock %}

{% block content %}
<h2>{% if form.instance.pk %}Editar{% else %}Nueva{% endif %} Inspección de Botiquín</h2>

<form method="post" novalidate>
    {% csrf_token %}
    <fieldset>
        <legend>Datos Generales</legend>
        {{ form.as_p }}
    </fieldset>

    <fieldset>
        <legend>Elementos del Botiquín</legend>
        {{ items.management_form }}

        <table style="width:100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Elemento / Ítem</th>
                    <th>Cantidad</th>
                    <th>Vencimiento</th>
                    <th>Estado</th>
                    <th>Observaciones</th>
                </tr>
            </thead>
            <tbody>
                {% for item_form in items %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td>{{ item_form.id }}{{ item_form.element_name }}</td>
                    <td>{{ item_form.quantity }}</td>
                    <td>{{ item_form.expiration_date }}</td>
                    <td>{{ item_form.status }}</td>
                    <td>{{ item_form.observations }}</td>
                </tr>
                {% if item_form.errors %}
                <tr>
                    <td colspan="5" style="color:red;">{{ item_form.errors }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </fieldset>

    <button type="submit" class="btn">Guardar Inspección</button>
    <a href="{% url 'first_aid_list' %}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}